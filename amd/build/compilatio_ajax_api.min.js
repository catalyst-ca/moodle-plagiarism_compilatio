define(["jquery"],function(c){function a(){c(".cmp-btn-lg").each(function(){c(this).attr("disabled","disabled"),c(this).addClass("disabled"),c(this).attr("href","#")})}var t={};function o(a,t,o,s,n,e,p,r,m){c.post(a+"/plagiarism/compilatio/ajax/display_document_frame.php",{cantriggeranalysis:t,isstudentanalyse:o,cmpfileid:s,canviewreport:n,isteacher:e,url:p,filename:r},function(t){c("#cmp-"+m).empty().append(t),setTimeout(t=>{if(e){var o=c("#cmp-"+m+" .cmp-similarity");o.on("mouseover",c=>{o.find("i").removeClass("fa-circle").addClass("fa-refresh")}),o.on("mouseout",c=>{o.find("i").removeClass("fa-refresh").addClass("fa-circle")}),o.click(function(){o.empty(),c.post(a+"/plagiarism/compilatio/ajax/update_score.php",{docId:s},function(c){o.replaceWith(c)})})}var n=c("#cmp-"+m+" .cmp-library");n.click(function(){if((i=n.find("i")).is(".cmp-library-in"))var t=0;if(i.is(".cmp-library-out"))var t=1;i.removeClass(),c.post(a+"/plagiarism/compilatio/ajax/set_indexing_state.php",{docId:s,indexingState:t},function(c){"true"==c&&(0==t?i.addClass("cmp-library-out fa-times-circle fa"):i.addClass("cmp-library-in fa-check-circle fa"))})});var p=c("#cmp-"+m+" .cmp-start-btn");p.click(function(){p.find("i").removeClass("fa-play-circle").addClass("fa-spinner fa-spin"),c.post(a+"/plagiarism/compilatio/ajax/start_analysis.php",{docId:s},function(a){"error"in(a=JSON.parse(a))?(c("#cmp-"+m+" p").remove(),c("#cmp-"+m).append("<p class='cmp-color-red'>"+a.error+"</p>"),p.find("i").removeClass("fa-spinner fa-spin").addClass("fa-play-circle")):p.replaceWith(a.documentFrame)})})},500)})}return t.startAllAnalysis=function(t,o,s){c(document).ready(function(){c("button.cmp-start-btn").click(function(){a(),c("#cmp-stats, #cmp-help, #cmp-home, #cmp-search, #cmp-notifications").hide(),c("#cmp-tabs-separator").after("<div class='cmp-alert cmp-alert-info'>"+s+"</div>"),c.post(t+"/plagiarism/compilatio/ajax/start_all_analysis.php",{cmid:o},function(){window.location.reload()})})})},t.sendUnsentDocs=function(t,o,s){c(document).ready(function(){c("button.cmp-send-btn").click(function(){a(),c("#cmp-stats, #cmp-help, #cmp-home, #cmp-search, #cmp-notifications").hide(),c("#cmp-tabs-separator").after("<div class='cmp-alert cmp-alert-info'>"+s+"</div>"),c.post(t+"/plagiarism/compilatio/ajax/send_unsent_docs.php",{cmid:o},function(){window.location.reload()})})})},t.resetDocsInError=function(t,o,s){c(document).ready(function(){c("button.cmp-reset-btn").click(function(){a(),c("#cmp-stats, #cmp-help, #cmp-home, #cmp-search, #cmp-notifications").hide(),c("#cmp-tabs-separator").after("<div class='cmp-alert cmp-alert-info'>"+s+"</div>"),c.post(t+"/plagiarism/compilatio/ajax/reset_docs_in_error.php",{cmid:o},function(){window.location.reload()})})})},t.validateTermsOfService=function(a,t){c(document).ready(function(){c("#tos-btn").click(function(){c.post(a+"/plagiarism/compilatio/ajax/validate_terms_of_service.php",{userid:t},function(){window.location.reload()})})})},t.checkUserInfo=function(a,t){c(document).ready(function(){c.post(a+"/plagiarism/compilatio/ajax/check_user_info.php",{userid:t})})},t.displayDocumentFrame=function(a,t,s,n,e,p,r,m,l){c(document).ready(function(){o(a,t,s,n,e,p,r,m,l),setInterval(function(){o(a,t,s,n,e,p,r,m,l)},18e4)})},t.compilatioTabs=function(a,t){c(document).ready(function(){a>0&&c("#cmp-bell").show(),c("#cmp-display-frame").on("click",function(){c(this).hide(),c("#cmp-container").show()}),c("#cmp-hide-frame").on("click",function(){c("#cmp-container").hide(),c("#cmp-display-frame").show()}),c("#cmp-tabs").show();var o="";c(o=t?"#cmp-search":a>0?"#cmp-notifications":"#cmp-home").show(),c("#cmp-show-notifications").on("click",function(){e(c(this),c("#cmp-notifications"))}),c("#show-stats").on("click",function(){e(c(this),c("#cmp-stats"))}),c("#show-help").on("click",function(){e(c(this),c("#cmp-help"))}),c("#show-search").on("click",function(){e(c(this),c("#cmp-search"))});var s=c("#cmp-show-notifications, #show-stats, #show-help, #show-search"),n=c("#cmp-notifications, #cmp-stats, #cmp-help, #cmp-home, #cmp-search");function e(c,a){a.is(":visible")||(a.show(),n.not(a).hide(),s.not(c).removeClass("active"),c.toggleClass("active"))}c("#cmp-logo").on("click",function(){var a=c("#cmp-home");a.show(),n.not(a).hide(),s.removeClass("active")})})},t});