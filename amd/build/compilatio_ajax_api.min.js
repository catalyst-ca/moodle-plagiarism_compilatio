define(["jquery"],function($){function b(){$(".cmp-btn-lg").each(function(){$(this).attr("disabled","disabled"),$(this).addClass("disabled"),$(this).attr("href","#")})}var a={};return a.toggleIndexingState=function(a,b,c){$(document).ready(function(){setTimeout(function(){var d=$(".cmp-"+b+" > div:first-child > i");d.click(function(){if(d.is(".cmp-library-in"))var b=0;if(d.is(".cmp-library-out"))var b=1;$.post(a+"/plagiarism/compilatio/ajax/set_indexing_state.php",{idDoc:c,indexingState:b},function(a){"true"==a&&(0==b?(d.removeClass("cmp-library-in"),d.addClass("cmp-library-out"),d.removeClass("fa-check-circle"),d.addClass("fa-times-circle")):(d.removeClass("cmp-library-out"),d.addClass("cmp-library-in"),d.removeClass("fa-times-circle"),d.addClass("fa-check-circle")))})})},300)})},a.refreshButton=function(a,c,d,e){$(document).ready(function(){var f=c.length,h=0,g=$("i.fa-refresh").parent("button");0==f?(b(),d>0&&$(".cmp-start-btn").each(function(){$(this).removeAttr("disabled"),$(this).removeClass("disabled")})):g.click(function(){b(),$("#cmp-home").html("<p>"+e+"<progress id='cmp-update-progress' value='"+h+"' max='"+f+"'></progress></p>"),$("#cmp-logo").click(),c.forEach(function(b){$.post(a+"/plagiarism/compilatio/ajax/check_analysis.php",{id:b},function(){h++,$("#cmp-update-progress").val(h),h==f&&window.location.reload()})})})})},a.startAllAnalysis=function(a,c,d,e){$(document).ready(function(){$("button.cmp-start-btn").click(function(){b(),$("#cmp-notifications").show(),$("#cmp-stats, #cmp-help, #cmp-home, #cmp-search").hide(),$("#cmp-notif-title").after("<div class='cmp-alert cmp-alert-info'><strong>"+d+"</strong><br/>"+e+"</div>"),$.post(a+"/plagiarism/compilatio/ajax/start_all_analysis.php",{cmid:c},function(){window.location.reload()})})})},a.startAnalysis=function(a,b,c){$(document).ready(function(){setTimeout(function(){$(".cmp-"+b+" > div:last-child").click(function(){$.post(a+"/plagiarism/compilatio/ajax/start_analysis.php",{docId:c},function(){window.location.reload()})})},300)})},a.restartFailedAnalysis=function(a,c,d,e){$(document).ready(function(){$("button.cmp-restart-btn").click(function(){b(),$("#cmp-notifications").show(),$("#cmp-stats, #cmp-help, #cmp-home, #cmp-search").hide(),$("#cmp-notif-title").after("<div class='cmp-alert cmp-alert-info'><strong>"+d+"</strong><br/>"+e+"</div>"),$.post(a+"/plagiarism/compilatio/ajax/restart_failed_analysis.php",{cmid:c},function(){window.location.reload()})})})},a.validateTermsOfService=function(a,b){$(document).ready(function(){$("#tos-btn").click(function(){$.post(a+"/plagiarism/compilatio/ajax/validate_terms_of_service.php",{userid:b},function(){window.location.reload()})})})},a.compilatioTabs=function(a,b,c,d,e){$(document).ready(function(){$("#cmp-tabs").show();$(c?"#cmp-search":b>0?"#cmp-notifications":"#cmp-home").show(),$("#cmp-show-notifications").on("click",function(){e($(this),$("#cmp-notifications"))}),$("#show-stats").on("click",function(){e($(this),$("#cmp-stats"))}),$("#show-help").on("click",function(){e($(this),$("#cmp-help"))}),$("#show-search").on("click",function(){e($(this),$("#cmp-search"))});var a=$("#cmp-show-notifications, #show-stats, #show-help, #show-search"),d=$("#cmp-notifications, #cmp-stats, #cmp-help, #cmp-home, #cmp-search");function e(c,b){b.is(":visible")||(b.show(),d.not(b).hide(),a.not(c).removeClass("active"),c.toggleClass("active"),$("#cmp-hide-area").fadeIn(),$(".cmp-tabs-separator").show())}$("#cmp-logo").on("click",function(){var b=$("#cmp-home");b.show(),d.not(b).hide(),a.removeClass("active"),$("#cmp-hide-area").fadeIn(),$(".cmp-tabs-separator").show()}),$("#cmp-hide-area").on("click",function(){d.hide(),$(this).fadeOut(),a.removeClass("active"),$(".cmp-tabs-separator").hide()})})},a})