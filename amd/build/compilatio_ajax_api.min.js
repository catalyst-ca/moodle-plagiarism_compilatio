define(["jquery"],function(i){function o(){i(".compilatio-button").each(function(){i(this).attr("disabled","disabled"),i(this).addClass("disabled"),i(this).attr("href","#")})}var t={},a=t.getIndexingState=function(o,t,a){i(document).ready(function(){i.post(o+"/plagiarism/compilatio/ajax/get_indexing_state.php",{idDoc:a},function(n){i(".compi-"+t+" .compilatio-library").detach(),i(".compi-"+t).prepend(n),setTimeout(function(){i(".compi-"+t+" > div:first-child").click(function(){c(o,t,a)})},250)})})},c=t.toggleIndexingState=function(o,t,c){var n;i(".compi-"+t+" > div:first-child").is(".compilatio-library-in")&&(i(".compi-"+t+" > div:first-child").removeClass("compilatio-library-in"),n=0),i(".compi-"+t+" > div:first-child").is(".compilatio-library-out")&&(i(".compi-"+t+" > div:first-child").removeClass("compilatio-library-out"),n=1),i(".compi-"+t+" > div:first-child").addClass("compilatio-library"),i.post(o+"/plagiarism/compilatio/ajax/set_indexing_state.php",{idDoc:c,indexingState:n},function(i){"true"==i&&a(o,t,c)})};return t.refreshButton=function(t,a,c){i(document).ready(function(){var n=a.length,e=0,s=i("i.fa-refresh").parent("button");0==n?o():s.click(function(){o(),i("#compilatio-home").html("<p>"+c+"<progress id='compi-update-progress' value='"+e+"' max='"+n+"'></progress></p>"),i("#compilatio-logo").click(),a.forEach(function(o){i.post(t+"/plagiarism/compilatio/ajax/compilatio_check_analysis.php",{id:o},function(){e++,i("#compi-update-progress").val(e),e==n&&window.location.reload()})})})})},t.compilatioTabs=function(o){i(document).ready(function(){var t="";t=o.length>0?"#compilatio-notifications":"#compilatio-home",i("#compilatio-container").css("height","auto"),i("#compilatio-tabs").show();var a=i("#compilatio-show-notifications, #show-stats, #show-help"),c=i("#compilatio-notifications, #compilatio-stats, #compilatio-help, #compilatio-home");function n(o,t){t.is(":visible")||(t.show(),c.not(t).hide(),a.not(o).removeClass("active"),o.toggleClass("active"),i("#compilatio-hide-area").fadeIn())}c.not(i(t)).hide(),i("#compilatio-show-notifications").on("click",function(){n(i(this),i("#compilatio-notifications"))}),i("#show-stats").on("click",function(){n(i(this),i("#compilatio-stats"))}),i("#show-help").on("click",function(){n(i(this),i("#compilatio-help"))}),i("#compilatio-logo").on("click",function(){var o=i("#compilatio-home");o.show(),c.not(o).hide(),a.removeClass("active"),i("#compilatio-hide-area").fadeIn()}),i("#compilatio-hide-area").on("click",function(){c.hide(),i(this).fadeOut(),a.removeClass("active")})})},t});