define(["jquery"],function(i){function t(){i(".cmp-btn-lg").each(function(){i(this).attr("disabled","disabled"),i(this).addClass("disabled"),i(this).attr("href","#")})}var a={};return a.toggleIndexingState=function(t,a,c){i(document).ready(function(){setTimeout(function(){var o=i(".cmp-"+a+" .cmp-library");o.click(function(){if((el=o.find("i")).is(".cmp-library-in"))var a=0;if(el.is(".cmp-library-out"))var a=1;i.post(t+"/plagiarism/compilatio/ajax/set_indexing_state.php",{idDoc:c,indexingState:a},function(i){"true"==i&&(0==a?(el.removeClass("cmp-library-in"),el.addClass("cmp-library-out"),el.removeClass("fa-check-circle"),el.addClass("fa-times-circle")):(el.removeClass("cmp-library-out"),el.addClass("cmp-library-in"),el.removeClass("fa-times-circle"),el.addClass("fa-check-circle")))})})},3e3)})},a.refreshButton=function(a,c,o,s){i(document).ready(function(){var n=c.length,e=0,r=i("i.fa-refresh").parent("button");0==n?(t(),o>0&&i(".cmp-start-btn").each(function(){i(this).removeAttr("disabled"),i(this).removeClass("disabled")})):r.click(function(){t(),i("#cmp-home").html("<p>"+s+"<progress id='cmp-update-progress' value='"+e+"' max='"+n+"'></progress></p>"),i("#cmp-logo").click(),c.forEach(function(t){i.post(a+"/plagiarism/compilatio/ajax/check_analysis.php",{id:t},function(){e++,i("#cmp-update-progress").val(e),e==n&&window.location.reload()})})})})},a.startAllAnalysis=function(a,c,o,s){i(document).ready(function(){i("button.cmp-start-btn").click(function(){t(),i("#cmp-notifications").show(),i("#cmp-stats, #cmp-help, #cmp-home, #cmp-search").hide(),i("#cmp-notif-title").after("<div class='cmp-alert cmp-alert-info'><strong>"+o+"</strong><br/>"+s+"</div>"),i.post(a+"/plagiarism/compilatio/ajax/start_all_analysis.php",{cmid:c},function(){window.location.reload()})})})},a.startAnalysis=function(t,a,c){i(document).ready(function(){setTimeout(function(){i(".cmp-"+a+" > div:last-child").click(function(){i.post(t+"/plagiarism/compilatio/ajax/start_analysis.php",{docId:c},function(){window.location.reload()})})},300)})},a.restartFailedAnalysis=function(a,c,o,s){i(document).ready(function(){i("button.cmp-restart-btn").click(function(){t(),i("#cmp-notifications").show(),i("#cmp-stats, #cmp-help, #cmp-home, #cmp-search").hide(),i("#cmp-notif-title").after("<div class='cmp-alert cmp-alert-info'><strong>"+o+"</strong><br/>"+s+"</div>"),i.post(a+"/plagiarism/compilatio/ajax/restart_failed_analysis.php",{cmid:c},function(){window.location.reload()})})})},a.validateTermsOfService=function(t,a){i(document).ready(function(){i("#tos-btn").click(function(){i.post(t+"/plagiarism/compilatio/ajax/validate_terms_of_service.php",{userid:a},function(){window.location.reload()})})})},a.displayButton=function(t,a){i(document).ready(function(){console.log(a),i.post(t+"/plagiarism/compilatio/ajax/display_button.php",{linkarray:JSON.stringify(a)},function(i){el.append(i)})})},a.compilatioTabs=function(t,a,c,o,s){i(document).ready(function(){i("#cmp-tabs").show();var t="";i(t=c?"#cmp-search":a>0?"#cmp-notifications":"#cmp-home").show(),i("#cmp-show-notifications").on("click",function(){n(i(this),i("#cmp-notifications"))}),i("#show-stats").on("click",function(){n(i(this),i("#cmp-stats"))}),i("#show-help").on("click",function(){n(i(this),i("#cmp-help"))}),i("#show-search").on("click",function(){n(i(this),i("#cmp-search"))});var o=i("#cmp-show-notifications, #show-stats, #show-help, #show-search"),s=i("#cmp-notifications, #cmp-stats, #cmp-help, #cmp-home, #cmp-search");function n(t,a){a.is(":visible")||(a.show(),s.not(a).hide(),o.not(t).removeClass("active"),t.toggleClass("active"),i("#cmp-hide-area").fadeIn(),i(".cmp-tabs-separator").show())}i("#cmp-logo").on("click",function(){var t=i("#cmp-home");t.show(),s.not(t).hide(),o.removeClass("active"),i("#cmp-hide-area").fadeIn(),i(".cmp-tabs-separator").show()}),i("#cmp-hide-area").on("click",function(){s.hide(),i(this).fadeOut(),o.removeClass("active"),i(".cmp-tabs-separator").hide()})})},a});