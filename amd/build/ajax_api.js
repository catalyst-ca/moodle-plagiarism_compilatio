define(["jquery"],function(i){function t(){i(".compilatio-button").each(function(){i(this).attr("disabled","disabled"),i(this).addClass("disabled"),i(this).attr("href","#")})}var o={},a=o.getIndexingState=function(t,o,a){i(document).ready(function(){i.post(t+"/plagiarism/compilatio/ajax/get_indexing_state.php",{idDoc:a},function(c){i(".compi-"+o+" .library").detach(),i(".compi-"+o).prepend(c),setTimeout(function(){i(".compi-"+o+" > div:first-child").click(function(){n(t,o,a)})},250)})})},n=o.toggleIndexingState=function(t,o,n){var c;i(".compi-"+o+" > div:first-child").is(".library-in")&&(i(".compi-"+o+" > div:first-child").removeClass("library-in"),c=0),i(".compi-"+o+" > div:first-child").is(".library-out")&&(i(".compi-"+o+" > div:first-child").removeClass("library-out"),c=1),i(".compi-"+o+" > div:first-child").addClass("library"),i.post(t+"/plagiarism/compilatio/ajax/set_indexing_state.php",{idDoc:n,indexingState:c},function(i){"true"==i&&a(t,o,n)})};o.refreshButton=function(o,a,n){i(document).ready(function(){var c=a.length,e=0,r=i("i.fa-refresh").parent("button");0==c?t():r.click(function(){t(),i("#compilatio-home").html("<p>"+n+"<progress id='compi-update-progress' value='"+e+"' max='"+c+"'></progress></p>"),i("#compilatio-logo").click(),a.forEach(function(t){i.post(o+"/plagiarism/compilatio/ajax/compilatio_check_analysis.php",{id:t},function(t){e++,i("#compi-update-progress").val(e),e==c&&window.location.reload()})})})})};return o});